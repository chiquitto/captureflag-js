import FirstFlagRobot from "./FirstFlagRobot.js"

export default class Highest2ValueRobot extends FirstFlagRobot {

  action(publicData) {
    const player = publicData.player

    let flags = publicData.flags
      // .filter((flag) => flag.type == "PointFlag")
      .map((flag, pos) => {
        flag.playerDistance = this.calcFlagDistance(player, flag)
        flag.pos = pos

        return flag
      })
      .sort((a, b) => {
        if (a.type == b.type) {
          if (b.points == a.points) {
            return a.playerDistance.total - b.playerDistance.total
          } else {
            return b.points - a.points
          }
        } else if (a.type == "SpecialFlag") {
          return 1
        } else if (b.type == "SpecialFlag") {
          return -1
        }
      })

    return this.goto(player, flags[0])
  }

  get color() {
    return '#CCFFCC'
  }

  get name() {
    return 'Highest2'
  }

  get avatar() {
    // https://www.iconfinder.com/icons/2624871/jedi_jedi_master_starwars_yoda_icon
    return 'data:image/png;base64,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'
  }

}

import FirstFlagRobot from "./FirstFlagRobot.js"

export default class HighestValueRobot extends FirstFlagRobot {

  action(publicData) {
    const player = publicData.player

    let flags = publicData.flags
      // .filter((flag) => flag.type == "PointFlag")
      .map((flag, pos) => {
        flag.playerDistance = this.calcFlagDistance(player, flag)
        flag.pos = pos

        return flag
      })
      .sort((a, b) => {
        if (a.type == b.type) {
          return b.points - a.points
        } else if (a.type == "SpecialFlag") {
          return 1
        } else if (b.type == "SpecialFlag") {
          return -1
        }
      })

    return this.goto(player, flags[0])
  }

  get color() {
    return '#0000FF'
  }

  get name() {
    return 'Highest'
  }

  get avatar() {
    // https://www.iconfinder.com/icons/2624885/fast_sega_sonic_super_sonic_icon
    return 'data:image/png;base64,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'
  }

}
